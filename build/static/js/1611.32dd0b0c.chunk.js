"use strict";(self.webpackChunkdev=self.webpackChunkdev||[]).push([[1611],{8470:(e,a,t)=>{t(6723)},5512:(e,a,t)=>{t.r(a),t.d(a,{default:()=>h});var s=t(2483),r=t(3376),o=t(2659),n=t(2595),i=(t(1728),t(3117)),c=t(1222),l=t(9918),d=(t(5549),t(614),t(8470),t(4848)),u=t(7757),b=t(3074),m=t(3191),p=t(1914),f=(t(7650),t(82)),_=(t(5699),t(1250)),S=t(5442),x=t(1935),A=(t(5989),t(6723));const h=()=>{const e=[{title:"Active Subcripton of Ambassador",url:"active-subscribed-ambassador"},{title:"Active Subscription of Subscriber",url:"active-subscribed-subscriber"},{title:"Defaulted Subscription Payment of Ambassador",url:"defaulted-subscription-paymentof-ambassador"},{title:"Defaulted Subscription Payment of Subscribers",url:"defaulted-subscription-paymentof-subscriber"},{title:"Subscription cancelled by Ambassador",url:"subscription-cancelledby-ambassador"},{title:"Subscription cancelled by Subscriber",url:"subscription-cancelledby-subscriber"},{title:"Referral Per Ambassador",url:"active-inactive-referral-per-ambassador"},{title:"Active Referral Per Ambassador",url:"active-referral-per-ambassador"},{title:"Inactive Referral Per Ambassador",url:"inactive-referral-per-ambassador"},{title:"Payment due to ambassador",url:"payment-due-to-ambassador"}],a={name:"AMBASSADOR FIRST NAME",selector:(e,a)=>e.Ambassador_firstname,cell:e=>(0,A.jsx)("span",{children:e.Ambassador_firstname}),sortable:!0},t={name:"AMBASSADOR LAST NAME",selector:(e,a)=>e.Ambassador_lastname,cell:e=>(0,A.jsx)("span",{children:e.Ambassador_lastname}),sortable:!0},h={name:"AMBASSADOR REFERRAL CODE",selector:(e,a)=>e.referral_code,cell:e=>(0,A.jsx)("span",{children:e.referral_code}),sortable:!0},y={name:"AMBASSADOR REFERRAL CODE USED",selector:(e,a)=>e.referral_code,cell:e=>(0,A.jsx)("span",{children:e.referral_code}),sortable:!0},v={name:"DATE OF USE OF REFERRAL USED",selector:(e,a)=>e.Date_of_use_of_referral_code,cell:e=>{const a=new Date(e.Date_of_use_of_referral_code),t=a.getDate(),s=a.toLocaleString("en-us",{month:"short"}),r=a.getFullYear(),o="".concat(t," ").concat(s,", ").concat(r);return(0,A.jsx)("span",{children:o})},sortable:!0},E={name:"DATE OF HVG SUBSCRIPTION",selector:(e,a)=>e.subscription_date,cell:e=>{const a=new Date(e.subscription_date),t=a.getDate(),s=a.toLocaleString("en-us",{month:"short"}),r=a.getFullYear(),o="".concat(t," ").concat(s,", ").concat(r);return(0,A.jsx)("span",{children:o})},sortable:!0},g={name:"PAIMENT FAILURE REASON",selector:(e,a)=>e.payment_status,cell:e=>(0,A.jsx)("span",{children:"cancel"===e.payment_status?"Payment failed":"Payment not done"}),sortable:!0},j={name:"SUBSCRIPTION STATUS",selector:(e,a)=>e.subscription_status,cell:e=>(0,A.jsx)("span",{children:e.subscription_status}),sortable:!0},R={name:"HVG SUBSCRIPTION STATUS",selector:(e,a)=>e.HVG_Subscription_status,cell:e=>(0,A.jsx)("span",{children:e.HVG_Subscription_status}),sortable:!0},N={name:"DATE OF HVG SUBSCRIPTION CALCELLATION",selector:(e,a)=>e.subscription_cancellation_date||e.cancellation_date,cell:e=>{const a=new Date(e.subscription_cancellation_date||e.cancellation_date),t=a.getDate(),s=a.toLocaleString("en-us",{month:"short"}),r=a.getFullYear(),o="".concat(t," ").concat(s,", ").concat(r);return(0,A.jsx)("span",{children:o})},sortable:!0},I={name:"DATE OF AMBASSADOR SIGN UP",selector:(e,a)=>e.ambassador_date,cell:e=>{const a=new Date(e.ambassador_date),t=a.getDate(),s=a.toLocaleString("en-us",{month:"short"}),r=a.getFullYear(),o="".concat(t," ").concat(s,", ").concat(r);return(0,A.jsx)("span",{children:o})},sortable:!0},D={name:"CURRENT ACTIVE REFERRAL",selector:(e,a)=>e.referral_count,cell:e=>(0,A.jsx)("span",{children:e.referral_count}),sortable:!0},C={name:"TOTAL AMOUNT DUE THIS MONTH",selector:(e,a)=>e.due_amount,cell:e=>(0,A.jsx)("span",{children:e.due_amount}),sortable:!0},T={name:"SUBSCRIBER FIRST NAME",selector:(e,a)=>e.Subscriber_firstname,cell:e=>(0,A.jsx)("span",{children:e.Subscriber_firstname}),sortable:!0},F={name:"SUBSCRIBER LAST NAME",selector:(e,a)=>e.Subscriber_lastname,cell:e=>(0,A.jsx)("span",{children:e.Subscriber_lastname}),sortable:!0},w={name:"DATE OF HVG SUBSCRIPTION",selector:(e,a)=>e.subscription_date,cell:e=>{const a=new Date(e.subscription_date),t=a.getDate(),s=a.toLocaleString("en-us",{month:"short"}),r=a.getFullYear(),o="".concat(t," ").concat(s,", ").concat(r);return(0,A.jsx)("span",{children:o})},sortable:!0},[O,M]=(0,s.useState)("/admin/active-subscribed-ambassador"),[U,P]=(0,s.useState)([]),[L,B]=(0,s.useState)([]),[Y,k]=(0,s.useState)([]),[H,V]=(0,s.useState)([]),[J,X]=(0,s.useState)([]),[G,q]=(0,s.useState)([]),[z,K]=(0,s.useState)([]),[W,Z]=(0,s.useState)([]),[Q,$]=(0,s.useState)([]),[ee,ae]=(0,s.useState)([]),[te,se]=(0,s.useState)([]),[re,oe]=(0,s.useState)([]),[ne,ie]=(0,s.useState)([]),[ce,le]=(0,s.useState)([]),[de,ue]=(0,s.useState)([]),[be,me]=(0,s.useState)([]),[pe,fe]=(0,s.useState)(0),_e=(0,u.wA)(),[Se,xe]=(0,s.useState)({startDate:new Date,endDate:new Date}),Ae=JSON.parse(localStorage.getItem("authInfo"));(0,r.zy)();console.log("authInfo=",Ae);let[he,ye]=(0,s.useState)(!1);const[ve,Ee]=(0,s.useState)("");let[ge,je]=(0,s.useState)(Ae?Ae.id:null);(0,r.Zp)();const{newNotificationMessage:Re,newNotificationStatus:Ne}=(0,s.useState)(""),Ie="active-subscribed-ambassador";(0,s.useEffect)((()=>{""!==Re&&(1===Ne&&p.hm.success(Re,"Success"),0===Ne&&p.hm.error(Re,"Error"),_e((0,b.fd)())),De()}),[]),l.oR.configure();const De=()=>{k(Ie),c.A.get("admin/".concat(Ie)).then((e=>{e.data.status&&(l.oR.success(e.data.message,{position:"top-center",autoClose:3e3}),V(e.data.data),ue([a,t,h,E,j,I]),me(e.data.data),console.log(H))})).catch((e=>{l.oR.dismiss(),e.response&&l.oR.error(e.response.data.message,{autoClose:3e3}),console.log(e)})),console.log("apiUrl="+Ie)},Ce=(s,r)=>{let{resetForm:o}=r;console.log("values",s),P(s),fe(s.report_type);const n=e[s.report_type].url;var i=n;k(n),M("/admin/".concat(n)),s.start_date&&(i+="/"+s.start_date),s.end_date&&(i+="/"+s.end_date),console.log("API url:******************",i),c.A.get("admin/".concat(i),s).then((e=>{if(e.data.status){if(l.oR.success(e.data.message,{position:"top-center",autoClose:3e3}),"active-subscribed-ambassador"===n)V(e.data.data),ue([a,t,h,E,j,I]),me(e.data.data);if("active-subscribed-subscriber"===n)X(e.data.data),ue([T,F,w,j]),me(e.data.data);if("defaulted-subscription-paymentof-ambassador"===n)q(e.data.data),ue([a,t,h,g]),me(e.data.data);if("defaulted-subscription-paymentof-subscriber"===n)K(e.data.data),ue([T,F,g]),me(e.data.data);if("subscription-cancelledby-ambassador"===n)Z(e.data.data),ue([a,t,h,N]),me(e.data.data);if("subscription-cancelledby-subscriber"===n)$(e.data.data),ue([T,F,N]),me(e.data.data);if("active-inactive-referral-per-ambassador"===n)ae(e.data.data),ue([T,F,y,a,t,v,R]),me(e.data.data);if("active-referral-per-ambassador"===n)se(e.data.data),ue([T,F,y,a,t,v]),me(e.data.data);if("inactive-referral-per-ambassador"===n)oe(e.data.data),ue([T,F,y,a,t,v]),me(e.data.data);if("payment-due-to-ambassador"===n)ie(e.data.data),ue([a,t,h,D,C]),me(e.data.data);console.log("reportApiUrl=",Y)}else"active-subscribed-ambassador"===n&&V(""),"active-subscribed-subscriber"===n&&X(""),"defaulted-subscription-paymentof-ambassador"===n&&q(""),"defaulted-subscription-paymentof-subscriber"===n&&K(""),"subscription-cancelledby-ambassador"===n&&Z(""),"subscription-cancelledby-subscriber"===n&&$(""),"active-inactive-referral-per-ambassador"===n&&ae(""),"active-referral-per-ambassador"===n&&se(""),"inactive-referral-per-ambassador"===n&&oe(""),"payment-due-to-ambassador"===n&&ie("")})).catch((e=>{l.oR.dismiss(),e.response&&(o(),l.oR.error(e.response.data.message,{autoClose:3e3})),console.log(e)}))};console.log("activeSubscribedAmbassador",H),console.log("activeSubscribedSubscriber",J),console.log("defaultedSubscriptionPaymentofambassador",G),console.log("defaultedSubscriptionPaymentofsubscriber",z),console.log("subscriptionCancelledbyAmbassador",W),console.log("subscriptionCancelledbySubscriber",Q),console.log("ActiveInactiveReferralPerAmbassador",ee),console.log("paymentDueToAmbassador",ne);return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"drawer drawer-mobile",children:[(0,A.jsx)("input",{id:"left-sidebar-drawer",type:"checkbox",className:"drawer-toggle"}),(0,A.jsxs)("div",{className:"drawer-content flex flex-col ",children:[(0,A.jsx)(o.A,{}),(0,A.jsx)("main",{className:"flex-1 overflow-y-auto pt-2 px-2  bg-base-200",children:(0,A.jsxs)("div",{className:"bg-zinc-50 px-3 py-3 rounded-xl bg-white shadow-mx border border-zinc-200",children:[(0,A.jsxs)("div",{className:"row",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsx)("div",{className:"text-xl font-semibold py-1 px-2",children:e[pe].title}),(0,A.jsx)("button",{type:"button",onClick:()=>{c.A.get("/admin/bulk-payment-report").then((e=>{e.data.status&&(l.oR.success(e.data.message,{position:"top-center",autoClose:3e3}),le(e.data.data),console.log("bulkPaymentData response",e.data.data))})).catch((e=>{l.oR.dismiss(),e.response&&l.oR.error(e.response.data.message,{autoClose:3e3}),console.log(e)}));const e=[["RECIPIENT NAME","RECIPIENT ACCOUNT","RECIPIENT ACCOUNT TYPE","BRANCH CODE","AMOUNT","OWN REFERENCE","RECIPIENT REFERENCE","EMAIL 1 NOTIFY","EMAIL 1 ADDRESS","EMAIL 1 SUBJECT","EMAIL 2 NOTIFY","EMAIL 2 ADDRESS","EMAIL 2 SUBJECT","EMAIL 3 NOTIFY","EMAIL 3 ADDRESS","EMAIL 3 SUBJECT","EMAIL 4 NOTIFY","EMAIL 4 ADDRESS","EMAIL 4 SUBJECT","EMAIL 5 NOTIFY","EMAIL 5 ADDRESS","EMAIL 5 SUBJECT","FAX 1 NOTIFY","FAX 1 CODE","FAX 1 NUMBER","FAX 1 SUBJECT","FAX 2 NOTIFY","FAX 2 CODE","FAX 2 NUMBER","FAX 2 SUBJECT","SMS 1 NOTIFY","SMS 1 CODE","SMS 1 NUMBER","SMS 2 NOTIFY","SMS 2 CODE","SMS 2 NUMBER"],...ce.map((e=>{let{recipient_name:a,recipient_account:t,recipient_acount_type:s,branch_code:r,amount:o,own_reference:n,recipient_reference:i,email_1_notify:c,email_1_address:l,email_1_subject:d,email_2_notify:u,email_2_address:b,email_2_subject:m,email_3_notify:p,email_3_address:f,email_3_subject:_,email_4_notify:S,email_4_address:x,email_4_subject:A,email_5_notify:h,email_5_address:y,email_5_subject:v,fax_1_notify:E,fax_1_code:g,fax_1_number:j,fax_1_subject:R,fax_2_notify:N,fax_2_code:I,fax_2_number:D,fax_2_subject:C,sms_1_notify:T,sms_1_code:F,sms_1_number:w,sms_2_notify:O,sms_2_code:M,sms_2_number:U}=e;return[a,t,s,r,o,n,i,c,l,d,u,b,m,p,f,_,S,x,A,h,y,v,E,g,j,R,N,I,D,C,T,F,w,O,M,U]}))].map((e=>e.join(","))).join("\n"),a=new Blob([e],{type:"text/csv;charset=utf-8;"});(0,_.saveAs)(a,"bulk_payment_report_of_ambassador.csv")},className:"btn btn-primary inline-block px-4 py-3 text-sm font-semibold text-center text-white uppercase transition duration-200 ease-in-out bg-indigo-600 rounded-md cursor-pointer hover:bg-indigo-700",children:"Bulk Payment CSV Export"})]}),(0,A.jsx)("div",{className:"divider mt-2"}),(0,A.jsx)("div",{className:"",children:(0,A.jsx)("div",{className:"flex w-[100%] align-center",children:(0,A.jsx)(i.l1,{initialValues:{start_date:"",end_date:"",report_type:null},validationSchema:f.A,onSubmit:(e,a)=>{let{resetForm:t}=a;if(e.end_date){const a=new Date(e.end_date);a.setDate(a.getDate()+1);const s={...e,end_date:a.toISOString().slice(0,10)};Ce(s,{resetForm:t})}else Ce(e,{resetForm:t})},children:a=>{let{resetForm:t}=a;return(0,A.jsxs)(i.lV,{className:"flex w-[100%] justify-between align-center py-3 rounded-sl bg-base-100 rounded px-2",children:[(0,A.jsxs)("div",{className:"flex flex-col",children:[(0,A.jsx)("label",{htmlFor:"start_date",children:"Start Date"}),(0,A.jsx)(i.D0,{name:"start_date",type:"date",className:"input input-bordered w-full max-w-xs"}),(0,A.jsx)(i.Kw,{name:"start_date",component:"div",className:"text-red-500 text-sm"})]}),(0,A.jsxs)("div",{className:"flex flex-col",children:[(0,A.jsx)("label",{htmlFor:"end_date",children:"End Date"}),(0,A.jsx)(i.D0,{name:"end_date",type:"date",className:"input input-bordered w-full max-w-xs"}),(0,A.jsx)(i.Kw,{name:"end_date",component:"div",className:"text-red-500 text-sm"})]}),(0,A.jsxs)("div",{className:"flex flex-col",children:[(0,A.jsx)("label",{htmlFor:"report_type",children:"Report Type"}),(0,A.jsxs)(i.D0,{as:"select",name:"report_type",id:"report_type",className:"dropdown-content z-[1] menu p-2 shadow bg-base-100 w-64",children:[(0,A.jsx)("option",{value:"",children:"Select an option"}),(0,A.jsx)("option",{value:0,children:" Active Subscription of Ambassador"}),(0,A.jsx)("option",{value:1,children:" Active Subscription of Subscriber"}),(0,A.jsx)("option",{value:2,children:" Defaulted Subscription payment of Ambassador"}),(0,A.jsx)("option",{value:3,children:" Defaulted Subscription payment of Subscriber"}),(0,A.jsx)("option",{value:4,children:" Cancellation of Subscription-Cancelled by Ambassador"}),(0,A.jsx)("option",{value:5,children:" Cancellation of Subscriptioin-Cancelled by Subscriber"}),(0,A.jsx)("option",{value:6,children:" Referral Per Ambassador"}),(0,A.jsx)("option",{value:7,children:" Active Referral Per Ambassador"}),(0,A.jsx)("option",{value:8,children:" Inactive Referral Per Ambassador"}),(0,A.jsx)("option",{value:9,children:" Payment due to Ambassador"})]}),(0,A.jsx)(i.Kw,{name:"report_type",component:"div",className:"text-red-500 text-sm"})]}),(0,A.jsxs)("div",{className:"flex align-center justify-between mt-6",children:[(0,A.jsx)("button",{type:"submit",className:"btn btn-primary mr-2 inline-block px-4 py-3 text-sm font-semibold text-center  text-white uppercase transition duration-200 ease-in-out bg-indigo-600 rounded-md cursor-pointer hover:bg-indigo-700",children:"Search"}),(0,A.jsx)("button",{type:"button",className:"btn btn-primary inline-block px-4 py-3 text-sm font-semibold text-center  text-white uppercase transition duration-200 ease-in-out bg-indigo-600 rounded-md cursor-pointer hover:bg-indigo-700",onClick:()=>(a=>{a({values:{start_date:"",end_date:"",report_type:""}});const t=e[pe].url;k(t),M("/admin/".concat(t)),c.A.get("admin/".concat(t),U).then((e=>{if(e.data.status){if(l.oR.success(e.data.message,{position:"top-center",autoClose:3e3}),"active-subscribed-ambassador"===t&&V(e.data.data),"active-subscribed-subscriber"===t&&X(e.data.data),"defaulted-subscription-paymentof-ambassador"===t){const a=e.data.data.filter((e=>null!==e.userid&&"cancel payment"===e.payment_status));q(a)}if("defaulted-subscription-paymentof-subscriber"===t){const a=e.data.data.filter((e=>null!==e.userid&&"cancel payment"===e.payment_status));K(a)}if("subscription-cancelledby-ambassador"===t){const a=e.data.data.filter((e=>null!==e.userId));Z(a)}if("subscription-cancelledby-subscriber"===t){const a=e.data.data.filter((e=>null!==e.userId));$(a)}"active-inactive-referral-per-ambassador"===t&&ae(e.data.data),"active-referral-per-ambassador"===t&&se(e.data.data),"inactive-referral-per-ambassador"===t&&oe(e.data.data),"payment-due-to-ambassador"===t&&ie(e.data.data),console.log("reportApiUrl=",Y)}else"active-subscribed-ambassador"===t&&V(""),"active-subscribed-subscriber"===t&&X(""),"defaulted-subscription-paymentof-ambassador"===t&&q(""),"defaulted-subscription-paymentof-subscriber"===t&&K(""),"subscription-cancelledby-ambassador"===t&&Z(""),"subscription-cancelledby-subscriber"===t&&$(""),"active-inactive-referral-per-ambassador"===t&&ae(""),"active-referral-per-ambassador"===t&&se(""),"inactive-referral-per-ambassador"===t&&oe(""),"payment-due-to-ambassador"===t&&ie("")})).catch((e=>{l.oR.dismiss(),e.response&&(a(),l.oR.error(e.response.data.message,{autoClose:3e3})),console.log(e)}))})(t),children:"Reset"})]})]})}})})}),(0,A.jsx)("div",{className:"overflow-x-auto w-full",children:(0,A.jsx)(x.A,{columns:de,data:be,children:(0,A.jsx)(S.Ay,{title:"Table",noHeader:!0,defaultSortField:"id",defaultSortAsc:!1,pagination:!0,highlightOnHover:!0,customStyles:{rows:{style:{minHeight:"50px"}},cells:{style:{whiteSpace:"nowrap"}},headCells:{style:{color:"#FFFFFF",backgroundColor:"#828282"}}}})})})]})})]}),(0,A.jsx)(d.A,{})]}),(0,A.jsx)(m.A,{}),(0,A.jsx)(n.A,{})]})}},1728:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(947);const r=s.Ik().shape({email:s.Yj().email().required("Email is required"),password:s.Yj().required("Password is required.").min(6,"Password is too short - should be 6 chars minimum.").max(20,"Password is too long - should be 20 chars maximum.")})},82:(e,a,t)=>{t.d(a,{A:()=>r});var s=t(947);const r=s.Ik().shape({report_type:s.Yj().required("Report type is required")})}}]);
//# sourceMappingURL=1611.32dd0b0c.chunk.js.map